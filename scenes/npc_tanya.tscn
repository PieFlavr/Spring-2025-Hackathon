[gd_scene load_steps=4 format=3 uid="uid://yyr5tv24fsar"]

[ext_resource type="Texture2D" uid="uid://dbvhx078t2jw" path="res://Assets/Modern tiles_Free/Characters_free/Alex_idle_16x16.png" id="1_3ejfc"]

[sub_resource type="GDScript" id="GDScript_nb1ac"]
script/source = "extends Area2D

var interacted := false
var showing_choices := false
@onready var label = $DialogueBox/Label

func _on_body_entered(body):
	if body.name == \"Player\" and not interacted:
		show_choices()

func show_choices():
	showing_choices = true
	label.text = \"Help event (Z) or Flirt (X)?\"

func _process(delta):
	if not showing_choices or interacted:
		return

	if Input.is_action_just_pressed(\"ui_accept\"):  # Z
		label.text = \"You help run Laser Chess! She gives you a badge.\"
		Global.has_council_badge = true
		interacted = true
		showing_choices = false

	elif Input.is_action_just_pressed(\"ui_cancel\"):  # X
		if randf() > 0.5:
			label.text = \"Bold move. She gives you her Golden Planner!\"
			Global.has_time_rewind = true
		else:
			label.text = \"She rejects you on the campus PA system. Brutal.\"
			Global.time_penalty(30)
		interacted = true
		showing_choices = false
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vj0fs"]

[node name="NPC_Tanya" type="Area2D"]
script = SubResource("GDScript_nb1ac")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("1_3ejfc")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(1, 0)
shape = SubResource("RectangleShape2D_vj0fs")

[node name="DialogueBox" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="DialogueBox"]
anchors_preset = -1
anchor_left = 0.065
anchor_top = 0.042
anchor_right = 0.065
anchor_bottom = 0.042
offset_left = -115.88
offset_top = -74.216
offset_right = -22.88
offset_bottom = -51.216
text = "this is tanya"
